# Progressive Web App (PWA)

The portfolio ships with Progressive Web App features so it can be installed, work offline, and feel native across devices.

## Features
### Service worker
- Generated by `next-pwa` during production builds.
- Registers automatically in supported browsers and updates in the background.
- Disabled in development to prevent caching issues.

### Web app manifest
- `public/manifest.json` declares app icons, theme colours, and metadata.
- Display mode is set to `standalone` for an app-like experience.
- Matches the design system colours used across the site.

### Offline caching
- Static assets, fonts, and Next.js build output are cached using `workbox` strategies.
- Cache expiration rules ensure fresh assets while keeping storage usage modest.

### Install prompt
- `PWAInstallPrompt` component detects support and offers an install CTA.
- Users can dismiss the prompt; the decision persists via `localStorage`.

### Offline fallback
- `app/offline/page.tsx` renders guidance when the network is unavailable.
- Link back to online areas once connectivity is restored.

## How it works
1. Build triggers `next-pwa`, which injects the service worker and precache manifest.
2. Browsers register the worker and cache assets on first visit.
3. Returning visits reuse cached resources when offline and revalidate when online.
4. Updates activate immediately after `skipWaiting` once the new worker finishes precaching.

## Browser support
- Chrome, Edge, and other Chromium browsers (full support).
- Firefox (partial support, install prompt handled differently).
- Safari on iOS 11.3+ and macOS 10.14.4+ (manual "Add to Home Screen").
- Samsung Internet and other Chromium-based mobile browsers.

## Development notes
- PWA behaviour is disabled when `NODE_ENV === "development"`.
- Ensure assets referenced in `manifest.json` exist in `public/`.
- Keep versioned icons to guarantee cache busting on updates.

## Testing PWA features
1. Build and start the app: `npm run build && npm start`.
2. Open the production server in Chrome and confirm the install prompt.
3. Install the app and verify it launches in standalone mode.
4. Switch to offline mode (DevTools > Network > Offline) and reload to check cached pages.
5. Visit `/offline` to confirm the fallback page renders.

## Configuration files
- `next.config.ts` – PWA configuration and runtime toggles.
- `public/manifest.json` – Web App Manifest metadata.
- `app/layout.tsx` – Injects PWA metadata and the install prompt.
- `presentation/components/shared/pwa-install-prompt.tsx` – Install UI.
- `app/offline/page.tsx` – Offline fallback view.
